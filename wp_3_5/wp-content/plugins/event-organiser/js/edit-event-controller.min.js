jQuery(document).ready(function(a){var f;eventOrganiserSchedulePicker.init({views:{start_date:"#eventorganiser_detail #from_date",start_time:"#HWSEvent_time",end_date:"#eventorganiser_detail #to_date",end_time:"#HWSEvent_time2",occurrence_picker:"#eo_occurrence_datepicker",occurrence_picker_toggle:".eo_occurrence_toogle",schedule_last_date:"#recend",schedule:"#HWSEventInput_Req",is_all_day:"#eo_allday",frequency:"#HWSEvent_freq",week_repeat:"#dayofweekrepeat",month_repeat:"#dayofmonthrepeat",recurrence_section:".reocurrence_row",
include:"#eo_occurrence_includes",exclude:"#eo_occurrence_excludes",schedule_span:"#recpan",summary:"#event_summary"},format:EO_Ajax_Event.format,is24hour:Boolean(EO_Ajax_Event.is24hour),startday:EO_Ajax_Event.startday,schedule:window.eventOrganiserSchedule,locale:EO_Ajax_Event.locale,editable:a("#HWSEventInput_Req").val()=="once"||a("#HWSEventInput_Req").val()=="custom"});a("#HWSEvent_rec").click(function(){window.eventOrganiserSchedulePicker.options.editable=a("#HWSEvent_rec").is(":checked");window.eventOrganiserSchedulePicker.update_form()});
a.widget("ui.combobox",{_create:function(){var d=this.element.hide(),e=d.children(":selected");e=e.val()?e.text():"";d=a("<span>").addClass("ui-combobox eo-venue-input").insertAfter(d);var j={delay:0,minLength:0,source:function(c,b){a.getJSON(EO_Ajax_Event.ajaxurl+"?callback=?&action=eo-search-venue",c,function(g){g=a.map(g,function(h){h.label=h.name;return h});b(g)})},select:function(c,b){if(a("tr.venue_row").length>0){b.item.term_id==0?a("tr.venue_row").hide():a("tr.venue_row").show();a("#eventorganiser_event_detail tr.eo-add-new-venue").hide();
eo_initialize_map(b.item.venue_lat,b.item.venue_lng);a("#eo_venue_Lat").val(b.item.venue_lat);a("#eo_venue_Lng").val(b.item.venue_lng)}a("#venue_select").removeAttr("selected");a("#venue_select").val(b.item.term_id)}},i=a("<input>").appendTo(d).val(e).addClass("ui-combobox-input").autocomplete(j).addClass("ui-widget-content ui-corner-left");i.data("autocomplete")._renderItem=function(c,b){if(b.term_id==0)return a("<li></li>").data("item.autocomplete",b).append("<a>"+b.label+"</a>").appendTo(c);var g=
a.grep([b.venue_address,b.venue_city,b.venue_state,b.venue_postcode,b.venue_country],function(h){return h}).join(", ");return a("<li></li>").data("item.autocomplete",b).append("<a>"+b.label+"</br> <span style='font-size: 0.8em'><em>"+g+"</span></em></a>").appendTo(c)};e=a("<span>").addClass("eo-venue-combobox-buttons").appendTo(d);a("<a style='vertical-align: top;margin: 0px -1px;padding: 0px;height: 21px;'>").attr("title","Show All Items").appendTo(e).button({icons:{primary:"ui-icon-triangle-1-s"},
text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-combobox-toggle ui-combobox-button").click(function(){if(i.autocomplete("widget").is(":visible"))i.autocomplete("close");else{a(this).blur();i.autocomplete("search","").focus()}});"event"==pagenow&&EO_Ajax_Event.current_user_can.manage_venues&&a("<a style='vertical-align: top;margin: 0px -1px;padding: 0px;height: 21px;'>").attr("title","Create New Venue").appendTo(e).button({icons:{primary:"ui-icon-plus"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right add-new-venue ui-combobox-button").click(function(){a("#eventorganiser_event_detail tr.eo-add-new-venue").show();
a("tr.venue_row").show();f={id:a("#venue_select").val(),label:a(".eo-venue-input input").val(),lat:a("#eo_venue_Lat").val(),lng:a("#eo_venue_Lng").val()};a("#venue_select").removeAttr("selected").val(0);a(".eo-venue-combobox-select").hide();a(".eo-venue-input input").val("");eo_initialize_map(0,0);var c=EO_Ajax_Event.location;if(c){c=c.split("/");c=c[c.length-1];eventorganiser_code_address(c)}else map.setZoom(1);a(this).blur()})}});a("#venue_select").combobox();a(".eo-add-new-venue-cancel").click(function(d){d.preventDefault();
a(".eo-venue-combobox-select").show();a(".eo-add-new-venue input").val("");eo_initialize_map(f.lat,f.lng);a("#venue_select").val(f.id);a(".eo-venue-input input").val(f.label);a("#eventorganiser_event_detail tr.eo-add-new-venue").hide()})});
